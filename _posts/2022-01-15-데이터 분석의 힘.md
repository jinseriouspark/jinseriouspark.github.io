
---
layout: post
title: "<데이터 분석의 힘> 이토고야치로"
author: "Seriouscoding"
---

책을 읽고 요약한 내용입니다. 피드백은 언제나 환영합니다

**책주소 [post url](http://www.yes24.com/Product/Goods/64094963)**

**저자: 이토 고야치로**


______________________________________________________________


키워드

- counterfactual potential outcome 반사실 잠재적 결과
- treatment 개입효과
- 출판 편향 : 어느 연구자가 X가 Y에 미친 영향이라는 인과관계를 검증했다고 하자. 분석 결과 영향은 0이었다. 아무런 인과관계가 없었고 과학적으로 유묭한 발견이었으나, 연구자는 이 연구로 논문을 작성할 수 없기 때문에 사라짐
- 협력 관계 편향 : 협력해줄만한 사람들만 모아 분석 할 시 발생
- 개입의 파급효과 : 개입 집단에만 편익이 발생하리라는 예상을 깨고 비교집단도 어떤 형태로든 영향을 받는 현상
    - 개입의 파급효과가 존재하는 경우 비교집단은 순수한 의미의 비교집단이 아니게 됌
    - 그렇기 때문에 개입집단과 비교집단의 결과 차이를 비교해도 개입 효과를 올바로 추정할 수 없게 됌
- 일반 균형적 효과 :
    - 실제 정책으로 광범위하게 개입이 이루어지면 예상치 못했던 변수도 영향을 받음
    - 소규모 학급을 캘리포니아주 전역에 설치하면 교사가 부족해지는 것과 같은 현상

내용

- RCT
    1. 원칙 3가지 및 설명
        1. 적절하게 집단을 나눈다
            
            시험으로 해결하려는 문제의 답이 나오도록 집단을 적절하게 나눠야 함
            
            
        2. 집단을 무작위로 나눈다
            
            왜? 그 외의 요소에 따라 (거주지 등) 나눈다면, 실험 설계 주요 요인과 그 외의 요소 중 어떤 효과가 더 영향력 있는지 실험 결과로 판단이 불가능
            
            진짜 요인이 무엇이었나? 라는 질문에 제대로 답할 수 없음
            
        3. 집단별로 충분한 표본수를 채운다
            - 필요한 계산 2가지
                - 실험 후 집단별로 평균값을 계산한다
                - 평균값의 차이를 비교한다
                
                *표본수가 충분히 커야 유의미한 결과를 얻을 수 있음, 우발적인 이유에 의한 평균값 에러가 줄어듦
                
    2. 개입효과(treatment) = $Y_1$- $Y_0$
    3. 한 사람에 대한 개입효과는 측정할 수 없지만, 여러사람에 대한 개입효과를 평균한 값인 ‘평균 개입효과ATE 는 측정 가능
        1. 개입 집단treatment group 과 비교집단 control group 을 나누어야 함
            - 개입집단 : 개입을 받는 집단
            - 비교집단 : 비교, 대조되는 집단
            - 전제 : 가격인상이라는 개입 X이 없을 경우 비교집단의 평균 소비량 (Yc)과 개입집단의 평균 소비량(Yt)는 같다
        2. 무작위비교시행 RCT 진행 시 두 집단 비교가 가능하여 인과관계 추론이 가능하다
            1. 중요한 이유? 
                - 자기 선택에 따라 집단을 나누지 않았기 때문에 별도 영향을 줄 개입 요소가 없음
                - ‘이론적으로’ 두 집단이 동절적인지 관측 가능
    4. 사례 소개
        - 실험 설계 1
            - 기타큐슈시에서 실시한 전력 가격 현장 실험
            - 질문 : 전력 가격을 바꾸면 사람들이 절전을 할까?
            - 실험 설계 시 구성요소
                - 개입집단 비교집단 설정 후 두 집단이 ‘전력 가격 외의 나머지 변수들은 동일’ 하다는 점을 보여줌
                - 기술 통계 자료 : 비교집단과 개입집단 모수들의 각 변수에 대한 평균값, 평균 차이 기재
                    - 기술통계 자료 생김새
                        
                        ![KakaoTalk_20220115_232348471.jpg](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%E1%84%8B%E1%85%B4%20%E1%84%92%E1%85%B5%E1%86%B7,%20%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A9%E1%84%80%E1%85%A9%E1%84%8B%E1%85%A3%E1%84%8E%E1%85%B5%E1%84%85%E1%85%A9%20(2022%2001%2014)%207bb1f6530fea40f08b795cb599c97770/KakaoTalk_20220115_232348471.jpg)
                        
                    - 통계 자료 결론 : 개입집단과 비교집단의 평균값이 큰 차이가 없기 때문에 집단이 무작위로 잘 나뉘었다
            - 결과 :
                
                ![KakaoTalk_20220115_232227420_04.jpg](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%E1%84%8B%E1%85%B4%20%E1%84%92%E1%85%B5%E1%86%B7,%20%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A9%E1%84%80%E1%85%A9%E1%84%8B%E1%85%A3%E1%84%8E%E1%85%B5%E1%84%85%E1%85%A9%20(2022%2001%2014)%207bb1f6530fea40f08b795cb599c97770/KakaoTalk_20220115_232227420_04.jpg)
                
                - 전력 가격인상은 절전을 촉진한다는 인과관계가 나타났다.
                - 평소 23엔이던 요금을 50엔, 100엔, 150엔으로 올릴 수록 가격 인상폭에 걸맞는 절전이 실천되었다
                - 가격이 오를수록 그에 따르는 소비량은 줄어들었다.
                - 책 내용
                    
                    좌측 상단의 그래프는 실험이 시작되기 전인 6월, 개입 집단과 비교집단의 평균 전력 소비량을 30분 단위로 나타내고 있다. 실험 전에는 두 집단 모두 가격이 같았다. 그래프를 보면 실험 전에는 두 집단의 평균 전력 소비량이 매우 비슷하게 움직이고 있다. 집단이 무작위로 나뉜 덕분이다. 
                    
                    그러면 실험이 시작되고 나서 피크 시간대에 개입 집단의 전력 가격이 50엔, 100엔, 150엔으로 오르면 소비 행동에 어떤 변화가 나타날까? 
                    
                    먼저 2-6 좌측 하단의 그래프는 전력 가격이 50엔이었던 날의 전력 소비량을 보여준다. 가격이 변하는 13시 이전에는 두 집단의 전력 소비량에 큰 차이가 없다. 그러나 가격이 오른 13시부터 17시까지는 개입집단의 소비량이 비교집단의 소비량에 비해 크게 줄었다. 이 차이가 바로 ‘평균 개입효과’다. 가격을 100엔, 150엔으로 올린 날에도 똑같은 일이 벌어진다. 피크 시간대에 개입집단의 평균 소비량은 비교 집단에 비해 감소했다. 
                    
                    또 가격이 150엔일 때 개입집단의 전력 소비량은 비교집단에 비해약 15퍼센트 줄었다. 이는표 2-6 우측 하단의 그래프에서 두 집단의 로그 차가 약 0.15라는 사실과 맞아 떨엉진다. 
                    
        - 실험 설계 2
            - 오바마 전 대통령의 대선 마케팅 전략
            - 질문 : 어떤 시안이 사람들의 클릭을 가장 많이 이끌어낼까?
            - 실험 설계시 구성요소
                - 설계 구조
                    
                    ![KakaoTalk_20220115_232227420.jpg](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%E1%84%8B%E1%85%B4%20%E1%84%92%E1%85%B5%E1%86%B7,%20%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A9%E1%84%80%E1%85%A9%E1%84%8B%E1%85%A3%E1%84%8E%E1%85%B5%E1%84%85%E1%85%A9%20(2022%2001%2014)%207bb1f6530fea40f08b795cb599c97770/KakaoTalk_20220115_232227420.jpg)
                    
                    - 2007 일정 기간동안 약 31만명에게 24개의 디자인 시안 중 무작위로 뽑힌 하나만 보이게 함
            - 결과 : 특정 시안이 가장 많은 메일 등록률을 보였고, 그것을 기준으로 선거 운동에 활용
                
                ![KakaoTalk_20220115_232227420_01.jpg](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%E1%84%8B%E1%85%B4%20%E1%84%92%E1%85%B5%E1%86%B7,%20%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A9%E1%84%80%E1%85%A9%E1%84%8B%E1%85%A3%E1%84%8E%E1%85%B5%E1%84%85%E1%85%A9%20(2022%2001%2014)%207bb1f6530fea40f08b795cb599c97770/KakaoTalk_20220115_232227420_01.jpg)
                
            
        - 실험 설계 3
            - 전력소비를 줄일 수 있는 가장 효과적인 정책
            - 질문 : 가격변화 또는 절전 요청시 전력 소비가 줄어들까?
            - 실험 설계시 구성요소
                - 비교집단 : 가격변화도 절전 요청도 받지 않는 집단
                - 가격 변화를 경험하는 집단
                - 절전 요청을 받는 집단
                
                → 위의 내용에 따라 각 집단에게 요청되는 모습을 그래프로 표기
                
                ![KakaoTalk_20220115_232227420_02.jpg](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%E1%84%8B%E1%85%B4%20%E1%84%92%E1%85%B5%E1%86%B7,%20%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A9%E1%84%80%E1%85%A9%E1%84%8B%E1%85%A3%E1%84%8E%E1%85%B5%E1%84%85%E1%85%A9%20(2022%2001%2014)%207bb1f6530fea40f08b795cb599c97770/KakaoTalk_20220115_232227420_02.jpg)
                
            - 결과 :
                - 책 내용
                    
                    ![KakaoTalk_20220115_232227420_05.jpg](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%E1%84%8B%E1%85%B4%20%E1%84%92%E1%85%B5%E1%86%B7,%20%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A9%E1%84%80%E1%85%A9%E1%84%8B%E1%85%A3%E1%84%8E%E1%85%B5%E1%84%85%E1%85%A9%20(2022%2001%2014)%207bb1f6530fea40f08b795cb599c97770/KakaoTalk_20220115_232227420_05.jpg)
                    
                    개입이 없었던 13시 이전의 소비량은 세 집단이 거의 같았다. 반면 개입이 있었더 13시부터 16시까지는 (2) 집단과 (3) 집단의 소비량이 비교집단에 비해 줄어들었다. 
                    
                    표 2-12에서 알 수 있는 점은 두 가지다. 
                    
                    첫번째, 절전 의식에 호소하는 정책과 가격에 호소하는 정책 모두 피크 시간대의 전력 소비량을 낮추는 효과가 있었다는 점이다.  
                    
                    두번째, 절전된 전기 소비량을 보면 가격에 호소하는 정책이 더욱 효과적이었다. 가격 정책은 여름 내내 약 15퍼센트의 절전 효과를 가져온 반면 절전 요청은 약 3퍼센트의 절전 효과를 가져왔다. 
                    
                    표 2-13에서는 정책 효과의 지속성을 분석한 그래프들이 나온다. 그래프는 여름과 겨울, 실험 시작부터 종료시까지 개입 효과의 변화를 보여준다. 절전의식에 호소하는 정책의 경우 첫 주기에는 8퍼센트쯤의 절전 효과가 나타났지만 그 후에는 절전효과가 거의 0에 가까워졌다. 한편 가격 정책은 처음부터 끝까지 비교적 큰 변화 없이 15퍼센트 이상의 절전효과를 가져왔다. 가격 정책은 효과가 크고 효과의 지속성도 있는 셈이다.
                    
                
    5. 집단을 무작위로 나누는 방법
        1. 단순 무작위 배정
        2. 층화 무작위 배정 , 블록 무작위 배정
            1. 성별, 소득이라는 2가지 변수를 기준으로 
                1. 소득이 높은 남성
                2. 소득이 낮은 남성
                3. 소득이 높은 여성
                4. 소득이 낮은 여성
            
            이라는 블록 만들 수 있음
            
    6. 강점 / 약점 
        1. 강점 : 인과관계를 과학적으로 보여줌, 분석 기법과 결과가 투명
        2. 약점 : 비용, 시간, 리소스가 많이 듦
        
- RD 디자인
    1. 원칙/전제
        1. RCT를 실시할 수 없을 떄는 자연실험을 활용할 수 있음
            1. 자연실험 : 실제 실험과 유사한 상황을 이용해 인과관계를 분석하는 기법
            2. RD 디자인은 온갖 경계선을 활용하여 인과관계에 다가서는 자연실험 기법
        2. 원칙
            1. 경계선을 기준으로 한가지 요인에만 비연속적으로 변화하는 상황을 찾아냄
            2. 경계선 부근에서 x이외의 다른 요인이 비연속적으로 변화하지 않는지 확인
        3. RD디자인의 가정
            
            ![KakaoTalk_20220115_232227420_08.jpg](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%E1%84%8B%E1%85%B4%20%E1%84%92%E1%85%B5%E1%86%B7,%20%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A9%E1%84%80%E1%85%A9%E1%84%8B%E1%85%A3%E1%84%8E%E1%85%B5%E1%84%85%E1%85%A9%20(2022%2001%2014)%207bb1f6530fea40f08b795cb599c97770/KakaoTalk_20220115_232227420_08.jpg)
            
            만약 경계선에서 본인 부담금X이 변화하지 않는다면 의료 서비스 이용자 수Y도 점프하지 않는다
            
            RD 디자인의 가정은 표 3-2에 점선으로 표시된 ‘가상의’ 데이터에 기초하므로 데이터로 입증하는 것은 불가능
            
            - RCT 와의 차이점
                - RCT에서는 무작위로 집단을 나누기만 하면 인과관계를 분석하기 위한 가정이 수학적으로 증명되었다. 하지만 RD디자인을 비롯한 자연실험 기법으로는 가정의 성립 여부를 수학적으로 증명하지 못하고 다만 가능성을 쌓아갈 수 있다
        4. RD디자인 가정이 무너지는 때
            
            경계를 기준으로 실제 외부 변수가 있을 때
            
            → 70세를 경계로 본인 부담금이 바뀌지 않더라도 의료 서비스 이용이 비연속적으로 증가할 가능성이 있음
            
            분석의 대상이 그래프 가로축의 변수를 조작할 수 있을 때
            
            → 분석 대상이 그래프 가로축 변수를 자의적으로 조작할 수 있다면 분석 불가
            
    2. 관련 키워드
        1. 준 실험 quasi-experiment
        2. 회귀 불연속 설계법
        3. 불연속
        4. 경계면
    3. 사례소개
        1. 사례 1
            1. 질문 2가지
                
                ![KakaoTalk_20220115_232227420_07.jpg](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%E1%84%8B%E1%85%B4%20%E1%84%92%E1%85%B5%E1%86%B7,%20%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A9%E1%84%80%E1%85%A9%E1%84%8B%E1%85%A3%E1%84%8E%E1%85%B5%E1%84%85%E1%85%A9%20(2022%2001%2014)%207bb1f6530fea40f08b795cb599c97770/KakaoTalk_20220115_232227420_07.jpg)
                
                - 본인 부담금을 변화시키면 의료 서비스 이용 빈도가 어떻게 달라질까?
                - 본인 부담금을 변화시키면 국민의 건강이 어떤 영향을 받을까?
    4. 강점/약점 
        1. 강점
            1. RCT를 실시하지 않고도 RCT에 가까운 상황을 만들어 낼 수 있음
            2. 그래프를 이용해 분석결과나 가정을 시각적으로 설명
                
                투명한 분석, 비전문가도 합리적인 분석이 가능
                
            3. 인위적으로 경계선이 만들어지는 상황이 많기에 다양한 사건에 적용 가능
        2. 약점
            1. 경계선 부근에 있는 사람에 대한 인과관계만 측정할 수 있음
                
                ex) 70세 부근인 사람들의 반응만 분석이 가능, 
                
                → 70세 전후의 사람들만 분석 대상이라면 문제가 없음
                
                → 정책의 효과는 연령에 관계없이 똑같다,라는 가정이 성립하면 문제가 없음 
                
- 집군분석
    1. 원칙/전제
        1. 분석 대상이 그래프 가로축의 변수를 조작할 수 있는 상황에 적용
            
            자동차 사례 : 분석대상은 자동차 / 그래프 가로축의 변수는 자동차의 무게
            
        2. 가정 
            
            만약 연비 규제치X가 계산식으로 바뀌지 않는다면 자동차 무게Y의 분포는 표 4-6의 점선처럼 매끈하고(연속적이고) 집적하지 않는다
            
            알 수 있는 점
            
            1. 연비 규제치가 변화하는 경계점 이외의 지점에서는 자동차의 분포가 전체적으로 매끈함, 그렇지 않다면 경계점의 변화는 연비규제 이외의 변수 때문일 수 있음
            2. 자동차 무게를 기준으로 삼는 정책은 연비 규제 뿐
            3. 두 히스토그램 비교 시 연비 규제치에 따라 집적의 위치가 변화
    2. 사례소개
        1. 질문 : 연비 규제가 자동차 무게를 늘렸을까? 
        2. 결과 : 표 4-4에서 얼마나 많은 차가 경계점 부근에 집적하고 있는지를 추정하고 각각의 경계점에서 자동차의 무게가 얼마나 늘었는지를 계산한 결과, 늘었다!
    3. 강점/약점 
        1. 강점
            1. 경계선 부근의 분석은 RCT 처럼 진행이 가능
            2. 그래프로 그린 결과를 보여줌으로써 투명한 분석이 가능
            3. 계단식으로 인센티브가 변화하는 상황은 다양하다. RCT 가 불가능 
        2. 약점
            1. 분석에 필요한 가정이 성립할 것이라는 근거를 제시할 수 있지만 입증할 수 없음
            2. 계단식 인센티브에 반응한 대상에 대해서만 인과관계를 분석 가능
- 패널 데이터 분석
    
    원인 / 전제 
    
    - 패널 데이터 분석의 가정
        - 만약 개입이 일어나지 않았다면 개입집단의 평균값($Y_T$)과 비교집단의 평균값($Y_c$)은 평행한 추이를 보인다 (평행 트렌드 가정)
    - ‘평행 트렌드 가정은 성립할 것이다’ 는 주장을 펼치기 위해 분석자가 해야 하는 두 가지
        1. 개입 이전의 데이터를 모아 개입집단과 비교집단 사이에 평행 트렌드 가정이 성립하는지를 조사
            
            : 개입 이전에 개입집단과 비교집단 사이에 평행 트렌드 가정이 성립하고 있어, 이후도 가정이 성립할 것이라고 추정
            
        2. 데이터 분석잔은 개입 이후 개입집단에만 영향을 미친 다른 사건이나 변수가 없었는지 확인해야 함
    
    키워드
    
    - 트렌드 : 시간 변화에 따른 데이터의 움직임
    - 평행트렌드 : 시간 변화에 따른 두 집단의 데이터 움직임이 평행을 이룬다는 의미
        
        → 그래야만 ‘개입’이라는 요소의 영향력이 입증되기 때문
        
    - 이중차분법 difference in differences methods
    - 고정효과추정법 fixed effect estimation : 시간에 따라 변하지 않는 고정적인 효과를 생략한다는 의미
    - 무작위 효과 추정
    
    강점 / 약점 
    
    - 강점
        - 다양한 상황에 활용할 수 있음 :
            
            어느 회사가 어느 해를 경계로 도쿄에서만 아이스크림 과옥를 하고 오사카에서는 하지 않았을 떄, 도쿄와 오사카의 아이스크림 판매 데이터를 모아 평행 트렌드 가정이 성립하면, 광고가 판매 수에 미친 인과관계를 분석할 수 있음 
            
        - 평행 트렌드 가정이 지켜지는 한, 개입집단과 비교집단 간에 원래 차이가 있었어도 문제가 되지 않는다
            
            두 집단의 차이를 분석하여 개입 이전의 원래 차이를 제거할 수 있음
            
        - 개입을 받은 모든 대상의  개입 효과에 대해 인과관계를 측정할 수 있다
    - 약점
        - 평행 트렌드 가정은 많은 상황에서 성립하지 않음
        - 복수기간에 걸쳐 개입집단과 비교집단의 데이터를 수집해야 함
- 불량 분석을 피하기 위한 방법
    1. 불량 분석이 발생하는 이유
        1. 데이터 측정에 문제가 있고 수치도 바르게 기재되어있지 않다
        2. 관측치에 대량의 결측치가 있다
        3. 데이터를 모든 세대가 아닌, 편중된 표본에서만 확보했다
    2. 외적타당성 확보가 필수
        
        : 실험이나 자연실험으로 얻은 분석 결과를 다른 대상에게도 적용할 수 있느냐를 ‘외적 타당성’ 의 문제라고 부름
        
        ↔내적타당성
        
        RCT가 우세함. RCT의 경우 실험이 적절하게 이루어지면 내적타당성을 100퍼센트 확보할 수 있음. RD디자인이나 집군분석도 RCT에 미치지 못하지만 비교적 내적 타당성이 강함. 패널데이터 분석은 개별 사례에 따라 다름
        
    3. 실험 설계자의 대책
        1. 개입집단을 어느 수준으로 설정할 지 깊이 생각
        2. 개입 효과 외에 개입의 파급효과도 분석할 수 있도록 실험을 설계 
            1. 파급효과 자체가 관심 대상이 되기도 함

**느낀점 / 적용할 점**

1. 인과관계 분석에서는 분석 설계가 핵심
2. 실험 설계에 대한 내용이 담긴 책을 찾아 읽어봐야겠음
3. 계량경제학에서의 인과추론을 빅데이터에서 어떻게 적용하는지 찾아보아야겠음

**넥스트 스텝 (책에서 추천)**

1. 계량 경제학 교과서
2. 원인과 결과 - 나카무로 마키코 외
3. 실증분석을 위한 계량 경제학 - 야마모토 이사무 외
4. 계량경제학 첫걸음 - 실증 분석의 권유 - 다나카 류이치 외
5. 실증 분석 입문 - 데이터에서 ‘인과관계’를 해독하는 법 - 모리타 하쓰루

---

계량경제학 - 제프리 울드리지

대체로 해롭지 않은 계량 경제학 - 조슈아 앵리스트 외

미시 계량 경제학 - 콜린카메론 외